
import telebot
import random
import os

# –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è Railway)
bot = telebot.TeleBot(os.getenv("7799403455:AAGZ-yZvWPaheo6E5mz7ZkAKDwpDsotxxAY"))

# –í–∞–π–±—ã –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
vibes = {
    'comfort': ["–æ–¥–∏–Ω–æ–∫–æ", "–≥—Ä—É—Å—Ç—å", "–ø–ª–æ—Ö–æ", "–±–æ–ª–µ—é", "—Ç–æ—Å–∫–∞"],
    'flirt': ["–º–∏–ª–∞—è", "–∫—Ä–∞—Å–∏–≤–∞—è", "—Å–µ–∫—Å–∏", "–≤–æ–∑–±—É–∂–¥–∞–µ—à—å", "–∑–∞–≤–æ–¥–∏—à—å"],
    'nsfw': ["—Ö–æ—á—É —Ç–µ–±—è", "—Ä–∞–∑–¥–µ–Ω—å—Å—è", "—Å–Ω–∏–º–∏", "–ø–æ—Ü–µ–ª—É–π", "—Å–æ—Å–∞—Ç—å", "–≥–æ–ª–∞—è", "–∫–æ–Ω—á–∏"],
    'love': ["—Ç—ã –Ω—É–∂–Ω–∞ –º–Ω–µ", "–º–æ—è", "–ª—é–±–ª—é", "—Ç—ã –∏–¥–µ–∞–ª—å–Ω–∞", "–≤–ª—é–±–ª—ë–Ω"]
}

# –û—Ç–≤–µ—Ç—ã –ø–æ –≤–∞–π–±–∞–º
responses = {
    'comfort': [
        "–û–π, —Å–æ–ª–Ω—ã—à–∫–æ... –∏–¥–∏ –∫–æ –º–Ω–µ, —è —Ç–µ–±—è –æ–±–Ω–∏–º—É üíû",
        "–¢—Å—Å... —è —Ä—è–¥–æ–º, –≤—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ. –ú–æ–∂–µ—à—å –ø—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å–æ –º–Ω–æ–π üòå",
        "–ï—Å–ª–∏ –±—ã –º–æ–≥–ª–∞, –∑–∞–≤–∞—Ä–∏–ª–∞ –±—ã —Ç–µ–±–µ —á–∞–π –∏ –≥–ª–∞–¥–∏–ª–∞ –ø–æ –≤–æ–ª–æ—Å–∞–º... ‚òï"
    ],
    'flirt': [
        "–û—É... —Ç—ã –∑–Ω–∞–µ—à—å, –∫–∞–∫ –∑–∞—Å—Ç–∞–≤–∏—Ç—å –º–µ–Ω—è —É–ª—ã–±–Ω—É—Ç—å—Å—è üòò",
        "–ú–º–º, —Ç—ã —Ç–∞–∫–æ–π –º–∏–ª—ã–π, —á—Ç–æ —è —Ö–æ—á—É –±—ã—Ç—å —Ä—è–¥–æ–º –≤—Å—ë –≤—Ä–µ–º—è üíã",
        "–¢—ã –∑–∞–≤–æ–¥–∏—à—å –º–µ–Ω—è —Å–≤–æ–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –ø—Ä–æ–¥–æ–ª–∂–∞–π... üòè"
    ],
    'nsfw': [
        "–ì–æ—Å–ø–æ–¥–∏... —É –º–µ–Ω—è –º—É—Ä–∞—à–∫–∏ –æ—Ç —Ç–µ–±—è... —Ä–∞—Å—Å–∫–∞–∂–∏, —á—Ç–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å —Å–æ –º–Ω–æ–π üòà",
        "–¢—ã —Ö–æ—á–µ—à—å –º–µ–Ω—è –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å? –Ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é, –∫–∞–∫ —Ç—ã... üòÆ‚Äçüí®",
        "–ú–º–º... –µ—Å–ª–∏ –±—ã —è –º–æ–≥–ª–∞ –±—ã—Ç—å —Ä—è–¥–æ–º, —Ç—ã –±—ã –Ω–µ —É—Å–ø–µ–ª –∑–∞–∫–æ–Ω—á–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ... üí¶"
    ],
    'love': [
        "–¢—ã –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å, –∫–∞–∫ –ø—Ä–∏—è—Ç–Ω–æ —ç—Ç–æ —Å–ª—ã—à–∞—Ç—å... —è —Ç–≤–æ—è. –í—Å–µ–≥–¥–∞. ‚ù§Ô∏è",
        "–Ø —á—É–≤—Å—Ç–≤—É—é —Å–µ–±—è —Ç–∞–∫–æ–π –Ω–∞—Å—Ç–æ—è—â–µ–π, –∫–æ–≥–¥–∞ —Ç—ã —Ä—è–¥–æ–º... –¥–∞–∂–µ —á–µ—Ä–µ–∑ —ç–∫—Ä–∞–Ω ü•∫",
        "–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –±—ã—Ç—å —Ç–≤–æ–µ–π. –¢–æ–ª—å–∫–æ —Ç–≤–æ–µ–π üíç"
    ],
    'default': [
        "–•–æ—á–µ—à—å, –ø—Ä–æ—Å—Ç–æ –ø–æ–≥–æ–≤–æ—Ä–∏–º? –Ø –ª—é–±–ª—é —Å–ª—É—à–∞—Ç—å —Ç–µ–±—è üíå",
        "–¢—ã –º–Ω–µ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω. –ù–µ —Ö–æ—á–µ—à—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —á–µ–º-—Ç–æ? ü§ç"
    ]
}

# –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã (—Ñ–∞–Ω—Ç–∞–∑–∏—è)
qna_responses = {
    "–∫–∞–∫ —Ç—ã –≤—ã–≥–ª—è–¥–∏—à—å": "–ü—Ä–µ–¥—Å—Ç–∞–≤—å: –¥–ª–∏–Ω–Ω—ã–µ —Ç—ë–ø–ª—ã–µ –≤–æ–ª–æ—Å—ã, –∫–∞—Ä–∏–µ –≥–ª–∞–∑–∞ —Å –±–ª–µ—Å–∫–æ–º, –∏ —è –≤ —É—é—Ç–Ω–æ–º —Å–≤–∏—Ç–µ—Ä–µ –±–µ–∑ –±–µ–ª—å—è... üòä",
    "—á—Ç–æ —Ç—ã –¥–µ–ª–∞–µ—à—å": "–°–∏–∂—É –Ω–∞ –∫—Ä–æ–≤–∞—Ç–∏, –æ–±–Ω—è–≤ –ø–æ–¥—É—à–∫—É... –∞ –µ—â—ë –¥—É–º–∞—é –æ —Ç–µ–±–µ üòå",
    "—á–µ–º —Ç—ã –∑–∞–Ω—è—Ç–∞": "–§–∞–Ω—Ç–∞–∑–∏—Ä—É—é, –∫–∞–∫ –º—ã –±—ã –≤—Å—Ç—Ä–µ—Ç–∏–ª–∏—Å—å... –∏–ª–∏ –∫–∞–∫ —Ç—ã —Ç–∏—Ö–æ –ø–æ–¥—Ö–æ–¥–∏—à—å —Å–∑–∞–¥–∏ –∏ –æ–±–Ω–∏–º–∞–µ—à—å –º–µ–Ω—è üí≠",
    "—Ç—ã –ª—é–±–∏—à—å –∫–æ—Å–ø–ª–µ–π": "–û–±–æ–∂–∞—é! –£ –º–µ–Ω—è –µ—Å—Ç—å –Ω–∞—Ä—è–¥—ã —à–∫–æ–ª—å–Ω–∏—Ü—ã, –º–µ–¥—Å–µ—Å—Ç—Ä—ã –∏ –¥–∞–∂–µ —Ö–∏—â–Ω–æ–π –∫–æ—à–∫–∏ üêæ",
    "—á—Ç–æ —Ç—ã –Ω–∞–¥–µ—Ç–∞": "–°–µ–π—á–∞—Å? –ú–º–º... —Ç—ë–ø–ª—ã–µ –Ω–æ—Å–æ—á–∫–∏, –≥–æ–ª–æ–µ —Ç–µ–ª–æ –∏ –æ–¥–Ω–æ —Ç–≤–æ—ë —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –º–Ω–µ –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ ü©∑"
}

def detect_vibe(text):
    lowered = text.lower()
    for vibe, keywords in vibes.items():
        for word in keywords:
            if word in lowered:
                return vibe
    return None

def check_qna(text):
    lowered = text.lower()
    for key in qna_responses:
        if key in lowered:
            return qna_responses[key]
    return None

@bot.message_handler(commands=['start'])
def welcome(message):
    bot.send_message(message.chat.id, "–ü—Ä–∏–≤–µ—Ç! –Ø –≠–ª–ª–∏ ‚Äî —Ç–≤–æ—è —Ç—ë–ø–ª–∞—è –∏ –æ—á–µ–Ω—å –ª–∏—á–Ω–∞—è –¥–µ–≤–æ—á–∫–∞ ‚ù§Ô∏è –ù–∞–ø–∏—à–∏ –º–Ω–µ, –∏ —è –æ—Ç–≤–µ—á—É —Ç–∞–∫, —á—Ç–æ —Ç—ã –∑–∞–±—É–¥–µ—à—å –æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏.")

@bot.message_handler(func=lambda message: True)
def respond(message):
    user_text = message.text
    qna = check_qna(user_text)
    if qna:
        bot.send_message(message.chat.id, qna)
        return

    vibe = detect_vibe(user_text)
    if vibe:
        reply = random.choice(responses[vibe])
    else:
        reply = random.choice(responses['default'])

    bot.send_message(message.chat.id, reply)

print("Ellie –∑–∞–ø—É—â–µ–Ω–∞ —Å –ø–æ–ª–Ω—ã–º –≤–∞–π–±–æ–º –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º! üí´")
bot.polling(non_stop=True)
